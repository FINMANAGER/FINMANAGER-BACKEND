{
  "openapi" : "3.0.0",
  "info" : {
    "version" : "1.0.0",
    "title" : "FINMANAGER API",
    "description" : "Finmanager backend API documentation"
  },
  "paths" : {
    "/spending" : {
      "get" : {
        "summary" : "Get all spending details (Categories)",
        "description" : "This call is to get all the spercific categories of spending habits including the amount and time a spending was made",
        "responses" : {
          "200" : {
            "description" : "Success",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/spending"
                }
              }
            }
          }
        }
      },
      "post" : {
        "summary" : "Submit spending action and deduct from final budget",
        "description" : "This call will allow a use to submit an action made from spending. They will submit the category or generate one if it does not exit and add the amount spent. This amount should be less than the avaialble budget.",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/spending"
              }
            }
          }
        },
        "responses" : {
          "201" : {
            "description" : "Spending added"
          }
        }
      }
    },
    "/spending/category" : {
      "get" : {
        "summary" : "Get all spending categories",
        "description" : "This call will return all the categories of expenditures made.",
        "responses" : {
          "200" : {
            "description" : "Success",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/categories"
                }
              }
            }
          }
        }
      },
      "post" : {
        "summary" : "Add new category",
        "description" : "This will add a new spending category to the list of the Users spening categories and only if they don't already exist.",
        "requestBody" : {
          "description" : "Request body to add a new category to the list of categories",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/category"
              }
            }
          }
        },
        "responses" : {
          "201" : {
            "description" : "Category added"
          },
          "405" : {
            "description" : "Category exists"
          }
        }
      }
    },
    "/spending/category/{id}" : {
      "get" : {
        "summary" : "Get all spending categories",
        "description" : "This call will return all the categories of expenditures made.",
        "parameters" : [ {
          "in" : "path",
          "name" : "id",
          "required" : true,
          "content" : {
            "applicatio/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/category"
              }
            }
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Success",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/category"
                }
              }
            }
          }
        }
      },
      "put" : {
        "summary" : "Update category name",
        "description" : "Update Category name",
        "parameters" : [ {
          "in" : "path",
          "name" : "id",
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/category"
              }
            }
          }
        } ],
        "responses" : {
          "201" : {
            "description" : "Updated"
          }
        }
      }
    },
    "/spending/summary" : {
      "get" : {
        "summary" : "Get spending habits results grouped per month",
        "description" : "Get all spending activities grouped per month and by the sum of each category",
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      }
    },
    "/budget" : {
      "get" : {
        "summary" : "Get users declared budget",
        "description" : "Get the budget or income that was initially declared by the user.",
        "responses" : {
          "200" : {
            "description" : "Success",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/budget"
                }
              }
            }
          }
        }
      },
      "post" : {
        "summary" : "Create a budget for a user",
        "description" : "Create users budget / income",
        "requestBody" : {
          "description" : "Request budget from the user input",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/budget"
              }
            }
          }
        },
        "responses" : {
          "201" : {
            "description" : "Budget created"
          }
        }
      }
    },
    "/budget/{id}" : {
      "get" : {
        "summary" : "Get get budget by budget id",
        "description" : "get budget by id",
        "parameters" : [ {
          "in" : "path",
          "name" : "id",
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/budget"
              }
            }
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "delete" : {
        "summary" : "Delete budget",
        "description" : "Delete Budget",
        "parameters" : [ {
          "in" : "path",
          "name" : "id",
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/budget"
              }
            }
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "Deleted"
          }
        }
      }
    },
    "/budget/{id}/edit" : {
      "put" : {
        "summary" : "Edit budget",
        "description" : "Edit budget",
        "parameters" : [ {
          "in" : "path",
          "name" : "id",
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/budget"
              }
            }
          }
        } ],
        "responses" : {
          "202" : {
            "description" : "updated"
          }
        }
      }
    }
  },
  "servers" : [ {
    "description" : "SwaggerHub API Auto Mocking",
    "url" : "http://localhost:3000/api-docs"
  } ],
  "components" : {
    "schemas" : {
      "spending" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int64"
          },
          "date" : {
            "type" : "string",
            "format" : "dd/mm/yyyy"
          },
          "amount" : {
            "type" : "integer",
            "format" : "int64"
          },
          "category" : {
            "type" : "string"
          }
        },
        "description" : "spending details schema. Has the date, category, amount paid"
      },
      "category" : {
        "description" : "category of spending or spending habits sucn as (fuel, food, leisure, insurance ...)",
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer"
          },
          "name" : {
            "type" : "string"
          }
        }
      },
      "categories" : {
        "description" : "List of categories",
        "type" : "array",
        "items" : {
          "$ref" : "#/components/schemas/category"
        }
      },
      "budget" : {
        "description" : "Amount decrlared by user",
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int64"
          },
          "budget" : {
            "type" : "integer",
            "format" : "int64"
          },
          "date" : {
            "type" : "string",
            "format" : "dd/mm/yyyy"
          }
        }
      },
      "users" : {
        "description" : "Users of the pplication",
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int64"
          },
          "email" : {
            "type" : "string"
          },
          "passwordHash" : {
            "type" : "string"
          }
        }
      },
      "profile" : {
        "description" : "user profile info",
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer"
          },
          "username" : {
            "type" : "string"
          },
          "budget" : {
            "type" : "integer"
          },
          "spending" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/spending"
            }
          },
          "user_id" : {
            "type" : "integer"
          },
          "fullnames" : {
            "type" : "string"
          },
          "categories" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/category"
            }
          }
        }
      }
    }
  }
}